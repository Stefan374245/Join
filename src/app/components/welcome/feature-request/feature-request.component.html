<main class="stakeholder-page">
  <header class="header">
    <img src="assets/images/joinlogodark.svg" alt="Join Logo" class="logo">
  </header>

  <nav class="request-today">
     <a routerLink="/welcome" class="back-link" aria-label="Back to welcome page">
      <img src="assets/images/arrowbackblue.svg" alt="arrow-back">
    </a>
    <span class="count" [class.limit-reached]="isLimitReached">
      @if (isLoading) {
        <span>Loading...</span>
      } @else {
        <span>{{ requestsUsed }} of {{ maxRequests }} requests used today</span>
      }
    </span>
  </nav>

  <article class="content">
    <h1>Welcome</h1>

    <section class="info-section">
      <div class="text-content">
        <p>
          Your request will be sent directly to our team via email.
          Our AI will analyze it and automatically create a ticket in our system.
        </p>
        <p>
          Please describe your feature request, bug report, or question as detailed as possible.
        </p>
      </div>

      <figure class="image-container">
        <img src="assets/images/stackholder.svg" alt="Feature request process">
      </figure>
    </section>

    <section class="action-section">

      <div class="dropdown-container">
        <button
          class="btn-submit-request"
          (click)="toggleDropdown()"
          type="button">
          ğŸ“¤ Submit Request
          <span class="dropdown-arrow" [class.open]="showDropdown">â–¼</span>
        </button>

        <!-- DROPDOWN MENU -->
        @if (showDropdown) {
          <div class="dropdown-menu">
            <button
              class="dropdown-item"
              (click)="openMailtoVariant()"
              type="button">
              <span class="icon">ğŸ“§</span>
              <div class="item-content">
                <strong>Via Email Client</strong>
                <small>Opens your default email program</small>
              </div>
            </button>

            <button
              class="dropdown-item"
              (click)="openWebhookVariant()"
              type="button">
              <span class="icon">ğŸ“</span>
              <div class="item-content">

                <a routerLink="/emailmask" class="form-link"><strong>Via Web Form</strong>
                <small>Fill out a form directly on our website</small></a>
              </div>
            </button>
          </div>
        }
      </div>

      @if (submitSuccess) {
        <div class="success-message">
          âœ… Email client opened successfully!
        </div>
      }

      @if (isLimitReached) {
        <p class="limit-message">âš ï¸ Daily request limit reached. Please try again tomorrow.</p>
      }
    </section>
  </article>
  <app-footer-auth />
</main>
