<div class="dialog-overlay" (click)="onClose()">
  <div class="dialog-container" (click)="$event.stopPropagation()">
    <!-- Close Button -->
    <button class="close-btn" (click)="onClose()" type="button">
      <img src="assets/images/close.svg" alt="Close" />
    </button>

    <!-- Left Side - Branding -->
    <div class="dialog-left">
      <div class="branding">
        <img src="assets/images/joinlogowhite.svg" alt="Join Logo" class="logo" />
        <h1>{{ title }}</h1>
        <p>Tasks are better with a team!</p>
        <div class="divider"></div>
      </div>
    </div>

    <!-- Right Side - Form -->
    <div class="dialog-right">
      <div class="form-container">
        <!-- Avatar -->
        <div class="avatar-section">
          <div class="avatar" [style.background-color]="avatarColor">
            <img 
              *ngIf="!avatarInitials" 
              src="assets/images/personwhite.svg" 
              alt="Person" 
              class="avatar-icon" />
            <span *ngIf="avatarInitials" class="avatar-initials">{{ avatarInitials }}</span>
          </div>
        </div>

        <!-- Form -->
        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
          <!-- First Name -->
          <div class="form-group">
            <div class="input-wrapper">
              <input
                type="text"
                id="firstName"
                formControlName="firstName"
                placeholder="First Name"
                class="form-input"
                [class.error]="contactForm.get('firstName')?.touched && contactForm.get('firstName')?.invalid"
              />
              <img src="assets/images/person.svg" alt="Person" class="input-icon" />
            </div>
            <span class="error-message" *ngIf="contactForm.get('firstName')?.touched">
              {{ getFieldError('firstName') }}
            </span>
          </div>

          <!-- Last Name -->
          <div class="form-group">
            <div class="input-wrapper">
              <input
                type="text"
                id="lastName"
                formControlName="lastName"
                placeholder="Last Name"
                class="form-input"
                [class.error]="contactForm.get('lastName')?.touched && contactForm.get('lastName')?.invalid"
              />
              <img src="assets/images/person.svg" alt="Person" class="input-icon" />
            </div>
            <span class="error-message" *ngIf="contactForm.get('lastName')?.touched">
              {{ getFieldError('lastName') }}
            </span>
          </div>

          <!-- Email -->
          <div class="form-group">
            <div class="input-wrapper">
              <input
                type="email"
                id="email"
                formControlName="email"
                placeholder="Email"
                class="form-input"
                [class.error]="contactForm.get('email')?.touched && contactForm.get('email')?.invalid"
                [readonly]="mode === 'edit'"
              />
              <img src="assets/images/mail.svg" alt="Email" class="input-icon" />
            </div>
            <span class="error-message" *ngIf="contactForm.get('email')?.touched">
              {{ getFieldError('email') }}
            </span>
          </div>

          <!-- Phone -->
          <div class="form-group">
            <div class="input-wrapper">
              <input
                type="tel"
                id="phone"
                formControlName="phone"
                placeholder="Phone (optional)"
                class="form-input"
                [class.error]="contactForm.get('phone')?.touched && contactForm.get('phone')?.invalid"
              />
              <img src="assets/images/call.svg" alt="Phone" class="input-icon" />
            </div>
            <span class="error-message" *ngIf="contactForm.get('phone')?.touched">
              {{ getFieldError('phone') }}
            </span>
          </div>

          <!-- Error Message -->
          <div class="error-message general-error" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>

          <!-- Action Buttons -->
          <div class="button-group">
            <button
              *ngIf="mode === 'edit'"
              type="button"
              class="btn btn-secondary"
              (click)="onDelete()">
              Delete
              <img src="assets/images/canceldarkblue.svg" alt="Delete" class="btn-icon" />
            </button>

            <button
              *ngIf="mode === 'add'"
              type="button"
              class="btn btn-secondary"
              (click)="onClose()">
              Cancel
              <img src="assets/images/canceldarkblue.svg" alt="Cancel" class="btn-icon" />
            </button>

            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="!isFormValid || isSubmitting">
              {{ submitButtonText }}
              <img src="assets/images/check.svg" alt="Submit" class="btn-icon" />
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

